:root{
  --bg:#0b1022; --fg:#e2e8f0; --panel:#070e1b; --panel-b:#324256; --road:#1b2637;

  /* Цвета свечения (R,G,B) */
  --glow-win: 255,233,138;   /* тёплое золото для победы */
  --glow-lose: 200,220,255;  /* холодный сине-голубой для поражения */
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font:14px/1.4 system-ui,-apple-system,'Segoe UI',Roboto,Arial}
.wrap{position:relative;display:grid;place-items:center;height:100%;gap:14px;padding:16px}
canvas{background:var(--panel);border:1px solid var(--panel-b);border-radius:18px;touch-action:none;box-shadow:0 18px 40px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.04)}
.hud{position:absolute;top:16px;left:50%;transform:translateX(-50%);display:flex;gap:12px;align-items:center;background:rgba(10,16,30,.55);border:1px solid rgba(180,200,255,.18);padding:8px 12px;border-radius:999px;backdrop-filter:blur(6px)}
.badge{padding:6px 10px;border-radius:999px;border:1px solid rgba(148,163,184,.35);background:rgba(2,6,23,.55);font-weight:700}
.btn{background:#1f2937;border:1px solid #3b4453;color:#e5e7eb;padding:10px 14px;border-radius:999px;cursor:pointer;font-weight:700}
.btn:hover{background:#111827}
.panel.lose .art{ display:none; }

/* Модалки */
.veil{position:fixed;inset:0;display:none;place-items:center;backdrop-filter:blur(2px);z-index:9999}
.veil.show{display:grid}
.panel{position:relative;width:min(560px,92vw);border-radius:24px;padding:22px;text-align:center;border:1px solid rgba(255,255,255,.2);
        box-shadow:0 25px 80px rgba(0,0,0,.55),inset 0 0 0 1px rgba(255,255,255,.06);overflow:hidden}
.panel .title{font-weight:900;font-size:clamp(26px,5vw,36px);margin:8px 0 6px;letter-spacing:1px;text-transform:uppercase}
.panel .score{font-size:clamp(18px,3.5vw,22px);opacity:.95;margin-bottom:14px}
.panel .actions{display:flex;justify-content:center;gap:12px;margin-top:8px}
.panel .restart{padding:10px 16px;border-radius:999px;border:1px solid rgba(255,255,255,.35);background:rgba(7,12,24,.65);color:#fff;cursor:pointer;font-weight:800}
.panel .restart:hover{background:rgba(7,12,24,.9)}
.stars,.ribbons{position:absolute;inset:-10%;pointer-events:none}

/* Победа */
.panel.win{background:linear-gradient(135deg,#0b1a2e 0%,#132e37 45%,#1b2b0d 100%)}
.panel.win .title{color:#ffe98a;text-shadow:0 0 18px rgba(255,233,138,.6),0 0 6px rgba(255,233,138,.9)}
.panel.win{overflow:visible}
.panel.win .art-wrap{position:absolute;top:-280px;left:50%;transform:translateX(-50%);width:78%;max-width:460px;z-index:20;pointer-events:none}
.panel.win .art{
  --glow: var(--glow-win);
  display:block;width:100%;height:auto;
  filter:
    drop-shadow(0 12px 30px rgba(var(--glow), .25))
    drop-shadow(0 0 16px rgba(var(--glow), .18));
  animation: loseArtIn .42s ease-out forwards,
             lightningPulse 2.6s ease-in-out .42s infinite alternate;
}
.panel.win .title{margin-top:60px}

/* Поражение */
.panel.lose{background:linear-gradient(135deg,#1a0d16 0%,#280e1e 45%,#0d142a 100%)}
.panel.lose .title{color:#ff9db8;text-shadow:0 0 18px rgba(255,80,120,.5),0 0 6px rgba(255,120,160,.9)}
.panel.lose{overflow:visible}
.panel.lose .art-wrap{position:absolute;top:-270px;left:55%;transform:translateX(-50%);width:78%;max-width:460px;z-index:20;pointer-events:none}
.panel.lose .art{
  --glow: var(--glow-lose);
  display:block;width:100%;height:auto;
  filter:
    drop-shadow(0 12px 30px rgba(var(--glow), .25))
    drop-shadow(0 0 16px rgba(var(--glow), .18));
  animation: loseArtIn .42s ease-out forwards,
             lightningPulse 2.6s ease-in-out .42s infinite alternate;
}
.panel.lose .title{margin-top:60px}

.panel .title,.panel .score,.panel .actions{position:relative;z-index:30}

/* Анимации */
@keyframes loseArtIn{
  from{opacity:0;transform:translateY(-12px) scale(.98)}
  to{opacity:1;transform:translateY(0) scale(1)}
}

@keyframes lightningPulse{
  0%{
    filter:
      drop-shadow(0 8px 20px rgba(var(--glow), .18))
      drop-shadow(0 0 10px rgba(var(--glow), .15));
  }
  100%{
    filter:
      drop-shadow(0 14px 40px rgba(var(--glow), .35))
      drop-shadow(0 0 22px rgba(var(--glow), .28));
  }
}
